<!DOCTYPE html>
<html>
	<head>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
				border: none;
			}
			canvas{
				margin: 0 auto;
			}
		</style>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
	</head>
	<body>
		<iframe src="https://script.google.com/a/macros/soekalkaji.co.in/s/AKfycbwYinmfRxOK8VteANSaaY03riTv9u3ndbVsEPoxqyWAXEMzDjZiYNxDUQGxPtnsfwKLaw/exec" width="100%" height="600px"></iframe>
		<div>
			<canvas id="myChart1"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart2"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart3"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart4"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart5"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart6"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart7"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart8"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart9"  style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart10" style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart11" style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart12" style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart13" style="width:100%;max-width:600px"></canvas>
			<canvas id="myChart14" style="width:100%;max-width:600px"></canvas>
		</div>
		<script type="text/javascript">
		    var Httpreq = new XMLHttpRequest(); // a new request
		    Httpreq.open("GET","https://script.google.com/a/macros/soekalkaji.co.in/s/AKfycbw_PAIn0k-1v2fpco_5-YXhLBCPPi8WgCuxEiVIFU34Hp8_FYcIOGElkKbyxG6PYcgbTg/exec",false);
		    Httpreq.send(null);
		    res=JSON.parse(Httpreq.responseText)
		    console.log(res)        
		    let a = [];
			let b = [];
			for (let i of res['answ']) {
			    let p = [];
			    let g = [];
			    let m = [];
			    for (let j of i) {
			        if (j.includes(',')) {
			            let o = j.split(',');
			            for (let k of o) {
			                p.push(k);
			            }
			        } else {
			            p.push(j);
			        }
			    }
			    for (let j of p) {
			        if (!g.includes(j)) {
			            g.push(j);
			        }
			    }
			    for (let j of g) {
			        m.push(p.filter(item => item === j).length);
			    }
			    a.push(g);
			    b.push(m);
			}
			h=a.map((value, index) => [value, b[index]])
			for (let [xValues,yValues] of h){
				var barColors = [
				  "#b91d47",
				  "#00aba9",
				  "#2b5797",
				  "#e8c3b9",
				  "#1e7145"
				].slice(0, xValues.length);
				new Chart(`myChart${a.indexOf(xValues)+1}`, {
				  type: "pie",
				  data: {
				    labels: xValues,
				    datasets: [{
				      backgroundColor: barColors,
				      data: yValues
				    }]
				  },
				  options: {
				    title: {
				      display: true,
				      text: res['ques'][a.indexOf(xValues)]
				    }
				  }
				});
			}
		</script>
	</body>
</html>
